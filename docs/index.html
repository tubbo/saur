<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/application.js~Application.html">Application</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/controller.js~Controller.html">Controller</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/mailer.js~Mailer.html">Mailer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/model.js~Model.html">Model</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/routes.js~Routes.html">Routes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/view.js~View.html">View</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validate">validate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validates">validates</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#application">application</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/application/cache.js~Adapter.html">Adapter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/application/cache.js~Memory.html">Memory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/application/cache.js~Redis.html">Redis</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/application/database.js~Database.html">Database</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/application/database.js~MysqlAdapter.html">MysqlAdapter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/application/database.js~PostgresAdapter.html">PostgresAdapter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ADAPTERS">ADAPTERS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ADAPTERS">ADAPTERS</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#application-middleware">application/middleware</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-logger">logger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-MissingRoute">MissingRoute</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SSLRedirect">SSLRedirect</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-timing">timing</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#cli">cli</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Generate">Generate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-New">New</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#cli-generate">cli/generate</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-GenerateController">GenerateController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-GenerateModel">GenerateModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-GenerateTemplate">GenerateTemplate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Test">Test</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-View">View</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#errors">errors</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/errors/missing-route.js~MissingRouteError.html">MissingRouteError</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#example-controllers">example/controllers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/example/controllers/home.js~HomeController.html">HomeController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/example/controllers/users.js~UsersController.html">UsersController</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#example-mailers">example/mailers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/example/mailers/user.js~UserMailer.html">UserMailer</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#example-models">example/models</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/example/models/user.js~User.html">User</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#example-views">example/views</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/example/views/home-page.js~HomePageView.html">HomePageView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/example/views/user-confirmation.js~UserConfirmationView.html">UserConfirmationView</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#model">model</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/model/errors.js~Errors.html">Errors</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/model/relation.js~Relation.html">Relation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/model/validations.js~GenericValidation.html">GenericValidation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/model/validations.js~Presence.html">Presence</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/model/validations.js~Validation.html">Validation</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#routes">routes</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/routes/route-set.js~RouteSet.html">RouteSet</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#view">view</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/saur/view/template.js~Template.html">Template</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="saur">Saur</h1><p>A rapid development web framework for <a href="https://deno.land">deno</a>.</p>
<h2 id="features">Features</h2><ul>
<li>Model-View-Controller Architecture</li>
<li>Supports multiple SQL database backends</li>
<li>Built-in caching</li>
<li>Routing DSL</li>
</ul>
<h2 id="installation">Installation</h2><p>Install the CLI with <code>deno install</code>:</p>
<pre><code><code class="source-code prettyprint">deno install --allow-run --allow-write saur https://deno.land/x/saur/cli.js</code>
</code></pre><p>Then create your app using the <code>new</code> command:</p>
<pre><code><code class="source-code prettyprint">saur new my-app
cd my-app</code>
</code></pre><p>You&apos;ll get an <strong>index.js</strong> file to start out.</p>
<p>Generate code by running the <code>generate</code> command:</p>
<pre><code><code class="source-code prettyprint">saur generate controller home</code>
</code></pre><p>And start the server by running:</p>
<pre><code><code class="source-code prettyprint">saur server</code>
</code></pre><p>You can also run tests:</p>
<pre><code><code class="source-code prettyprint">deno test</code>
</code></pre><h2 id="usage">Usage</h2><p>Saur is strucutured similarly to other &quot;Web MVC&quot; frameworks like
<a href="https://djangoproject.com">Django</a> and <a href="https://rubyonrails.org">Ruby on Rails</a>. Each object in your application
represents a different role that&apos;s played:</p>
<ul>
<li><strong>Controllers</strong> are used to respond to requests from the main
application router. After parsing the URL, a new instance of the
Controller is created to fulfill the request. Controllers come
pre-packed with abstractions meant to help you in this effort.</li>
<li><strong>Models</strong> encapsulate the database logic with an Object-Relational
Mapper, pre-populating your model objects with the data from the
database and validating input before it&apos;s persisted.</li>
<li><strong>Views</strong> are objects used to render templates within a given context.
Similar to helpers and presenters in Rails, you can define View
methods and have them automatically appear in the rendered template.</li>
<li><strong>Templates</strong> are [EJS][] files that live in <code>./templates</code>, and
populated with a <code>View</code> object as context when they are rendered from
file.</li>
</ul>
<h3 id="quick-example--hello-world">Quick Example: Hello World</h3><p>Create a new appliction in any JS file. For this example, it will be
called <strong>index.js</strong>:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import Application from &quot;https://deno.land/x/saur/application.js&quot;
import ApplicationController from &quot;./controllers/application&quot;

window.App = new Application({
  // enter your config settings here
})

App.routes.draw(({ root }) =&gt; {
  root(&quot;index&quot;, ApplicationController)
})</code>
</code></pre>
<p>Next, add the <code>ApplicationController</code> in <strong>controllers/application.js</strong>:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import Controller from &quot;https://deno.land/x/saur/application.js&quot;
import HelloWorld from &quot;../views/hello.js&quot;

export default class ApplicationController extends Controller {
  index() {
    this.response.body = &quot;Hello World&quot;
  }
}</code>
</code></pre>
<p>You can now start the server:</p>
<pre><code><code class="source-code prettyprint">deno index.js</code>
</code></pre><p>Browse to <a href="https://localhost:3000">https://localhost:3000</a> to see your new app!</p>
<h3 id="full-example--views-and-templates">Full Example: Views and Templates</h3><p>Unlike Rails, views and templates are not the same thing in Saur. The
separation of concerns here allows the developer to write methods
particular to each view without having to share that context with other
views.</p>
<p>For example, say a developer wants to make it so a user&apos;s name appears
titleized in the <code>show</code> view, but on the <code>index</code> view it should be
abbreviated. To accomplish this, first create a new <code>ShowView</code> class:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import View from &quot;https://deno.land/x/saur/view.js&quot;
import titleCase from &quot;https://deno.land/x/case/titleCase.ts&quot;;

export default class ShowView extends View {
  static template = &quot;./templates/user.ejs&quot; // relative to App.root

  get title() {
    return titleCase(this.controller.user.name)
  }
}</code>
</code></pre>
<p>Now, create a <code>SummaryView</code> class that only displays the user name as
the title:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import View from &quot;https://deno.land/x/saur/view.js&quot;

export default class SummaryView extends View {
  static template = &quot;./templates/user.ejs&quot; // relative to App.root

  get title() {
    return this.controller.user.name
  }
}</code>
</code></pre>
<p>You&apos;ll notice both of these views use the same template. That&apos;s not a
typo! It&apos;s possible to render common templates with differing contexts
using view objects. Here&apos;s the EJS template we&apos;ll be rendering in
<strong>templates/user.ejs</strong>:</p>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;</code>
</code></pre>
<p>Connect it to the router by rendering these views from a
<code>UsersController</code>:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import Controller from &quot;https://deno.land/x/saur/controller.js&quot;
import SummaryView from &quot;../views/users/summary.js&quot;
import ShowView from &quot;../views/users/show.js&quot;
import User from &quot;../models/user.js&quot;

export default class UsersController extends Controller {
  summary({ id }) {
    const user = User.find(id)

    this.render(IndexView)
  }

  show({ id }) {
    const user = User.find(id)

    this.render(ShowView)
  }
}</code>
</code></pre>
<p>And finally, route the controller actions in your application code:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import UsersController from &quot;./controllers/users.js&quot;

App.routes.draw(({ resources }) =&gt; {
  resources(&quot;users&quot;, UsersController, ({ member } =&gt; {
    member(({ get }) =&gt; get(&quot;summary&quot;))
  })
})</code>
</code></pre>
<p>Now, when you visit <code>/users/:id</code>, you&apos;ll get the titleized name, but
visiting <code>/users/:id/summary</code> will only render the abbreviated name.</p>
<h3 id="models">Models</h3><p>Models are structured very similar to ActiveRecord. Here&apos;s an example of
what a <code>User</code> model might look like:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import Model, { validates, validate } from &quot;https://deno.land/x/saur/model.js&quot;

export default class User extends Model {
  static table = &quot;users&quot;
  static validations = [
    validates(&quot;name&quot;, { presence: true })
    validates(&quot;password&quot;, { presence: true })
    validate(&quot;nameNotFoo&quot;)
  ]

  nameNotFoo() {
    if (this.name === &quot;foo&quot;) {
      this.errors.add(&quot;name&quot;, &quot;cannot be &apos;foo&apos;&quot;)
    }
  }
}</code>
</code></pre>
<p>You can find a model by its ID like so;</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const user = User.find(1)</code>
</code></pre>
<p>Or, find it by any other property:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const userByName = User.findBy({ name: &quot;bar&quot; })</code>
</code></pre>
<p>Using <a href="https://github.com/manyuanrong/sql-builder">SQL Builder</a> under the hood, you can chain query fragments
together to construct a query based on the given data. Saur wraps the
SQL Builder&apos;s <code>Query</code> object, lazy-loading the data you need when you
ask for it. For example, the following query won&apos;t be run immediately:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const users = User.where({ name: &quot;bar&quot; })

users.limit(10)</code>
</code></pre>
<p>Only when the data is actually needed, like iteration methods, will it be run:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const names = users.map(user =&gt; user.name) // =&gt; [&quot;bar&quot;]</code>
</code></pre>
<p>This doesn&apos;t apply for <code>find</code> or <code>findBy</code>, since those need to return a
full model object, and thus the query will run when called in order to
give you immediate feedback.</p>
<h3 id="caching">Caching</h3><p>A caching layer is also built in, with support for &quot;russian-doll&quot;
strategies in the view:</p>
<pre><code><code class="source-code prettyprint">&lt;article&gt;
  &lt;%= cache(`users/${user.id}`, () =&gt; { %&gt;
    &lt;header&gt;
      &lt;h1&gt;&lt;%= user.name %&gt;&lt;/h1&gt;
    &lt;/header&gt;
    &lt;main&gt;
      &lt;%= cache(`users/${user.id}/posts`, () =&gt; { %&gt;
        &lt;% user.posts.forEach(post =&gt; { %&gt;
          &lt;p&gt;&lt;%= post.title %&gt;&lt;/p&gt;
        &lt;% }) %&gt;
      &lt;%= }) %&gt;
    &lt;/main&gt;
  &lt;%= }) %&gt;
&lt;/article&gt;</code>
</code></pre><p>This <code>cache</code> method is provided in the <code>View</code> for your convenience, but
you can access the app cache directly using <code>App.cache</code>. The method used
in the <code>cache</code> helper is <code>App.cache.fetch</code>, and is notable because it
first checks if a key is available and uses the cache if so, otherwise
it will call the provided &quot;fresh&quot; method and save that value as the
cache.</p>
<h2 id="development">Development</h2><p>To build documentation, you&apos;ll need [ESDoc][] and plugins installed:</p>
<pre><code><code class="source-code prettyprint">yarn global add esdoc esdoc-ecmascript-proposal-plugin esdoc-standard-plugin</code>
</code></pre><p>Then, run:</p>
<pre><code><code class="source-code prettyprint">make</code>
</code></pre><p>This will also generate a <code>bin/saur</code> binstub so you can run CLI
commands.</p>
<p>Before submitting your code, make sure it&apos;s formatted:</p>
<pre><code><code class="source-code prettyprint">make fmt</code>
</code></pre></div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
